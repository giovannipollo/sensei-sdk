#
# Copyright (c) 2018 Nordic Semiconductor
#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
#

source "Kconfig.zephyr"

menu "Nordic UART BLE GATT service sample"

config BT_NUS_THREAD_STACK_SIZE
	int "Thread stack size"
	default 1024
	help
	  Stack size used in each of the two threads

config BT_NUS_UART_BUFFER_SIZE
	int "UART payload buffer element size"
	default 500
	help
	  Size of the payload buffer in each RX and TX FIFO element

config BT_NUS_SECURITY_ENABLED
	bool "Enable security"
	default y
	select BT_SMP
	help
	  "Enable BLE security for the UART service"

config BT_NUS_UART_RX_WAIT_TIME
	int "Timeout for UART RX complete event"
	default 50000
	help
	  Wait for RX complete event time in microseconds

config BT_NUS_UART_ASYNC_ADAPTER
	bool "Enable UART async adapter"
	select SERIAL_SUPPORT_ASYNC
	help
	  Enables asynchronous adapter for UART drives that supports only
	  IRQ interface.

config HAS_SEGGER_RTT
	bool "Enable Segger RTT"
	default y

endmenu

menu "State Machine Configuration"

config STATE_MACHINE_USE_CPU_IDLE
	bool "Use k_cpu_idle() instead of k_sleep() in state machine loop"
	default n
	help
	  If enabled, the state machine thread will use k_cpu_idle() instead of
	  k_sleep(K_USEC(1)) between state run() iterations. k_cpu_idle() keeps
	  the CPU more responsive but may consume more power. k_sleep() yields
	  CPU time to other threads more effectively and reduces power consumption.

endmenu

menu "Multi-Board Sync Configuration"

choice BOARD_SYNC_ROLE
	prompt "Board synchronization role"
	default BOARD_SYNC_ROLE_STANDALONE
	help
	  Select the role of this board in multi-board synchronization.
	  PRIMARY generates sync pulses, SECONDARY waits for them.

config BOARD_SYNC_ROLE_STANDALONE
	bool "Standalone (no inter-board sync)"
	help
	  Board operates independently without cross-board synchronization.

config BOARD_SYNC_ROLE_PRIMARY
	bool "Primary (sync master)"
	help
	  Board generates sync pulses. Starts acquisition immediately and
	  asserts GPIO trigger line for secondary boards.

config BOARD_SYNC_ROLE_SECONDARY
	bool "Secondary (sync follower)"
	help
	  Board waits for sync pulse from primary before starting acquisition.
	  Configures GPIO as input with interrupt.

endchoice

config BOARD_ID
	int "Unique board identifier (1-255)"
	default 1
	help
	  Unique identifier for this board. Embedded in packet metadata
	  to distinguish data sources during post-processing.
	  Recommended: Board A (EEG) = 1, Board B (EMG) = 2.

config BOARD_SYNC_PERIODIC_MS
	int "Periodic sync pulse interval (ms)"
	default 1000
	depends on BOARD_SYNC_ROLE_PRIMARY
	help
	  Interval in milliseconds between periodic sync pulses.
	  Used for post-hoc drift correction. Set to 0 to disable.

endmenu
